<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Tide: tide::Segment Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tide&#160;<span id="projectnumber">0.1.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespacetide.html">tide</a>      </li>
      <li class="navelem"><a class="el" href="classtide_1_1_segment.html">Segment</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>tide::Segment Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="tide::Segment" --><!-- doxytag: inherits="tide::MasterElement" -->
<p>The <a class="el" href="classtide_1_1_segment.html" title="The Segment element.">Segment</a> element.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="segment_8h_source.html">tide/segment.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for tide::Segment:</div>
<div class="dyncontent">
<div class="center"><img src="classtide_1_1_segment__inherit__graph.png" border="0" usemap="#tide_1_1_segment_inherit__map" alt="Inheritance graph"/></div>
<map name="tide_1_1_segment_inherit__map" id="tide_1_1_segment_inherit__map">
<area shape="rect" id="node2" href="classtide_1_1_master_element.html" title="The MasterElement interface." alt="" coords="5,83,160,111"/><area shape="rect" id="node4" href="classtide_1_1_element.html" title="The Element interface, a basic interface to an element object." alt="" coords="28,6,137,34"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for tide::Segment:</div>
<div class="dyncontent">
<div class="center"><img src="classtide_1_1_segment__coll__graph.png" border="0" usemap="#tide_1_1_segment_coll__map" alt="Collaboration graph"/></div>
<map name="tide_1_1_segment_coll__map" id="tide_1_1_segment_coll__map">
<area shape="rect" id="node2" href="classtide_1_1_master_element.html" title="The MasterElement interface." alt="" coords="995,89,1149,117"/><area shape="rect" id="node6" href="classtide_1_1_seek_head.html" title="The SeekHead element, used as an index for a Tide file." alt="" coords="1343,21,1463,49"/><area shape="rect" id="node11" href="classtide_1_1_segment_info.html" title="The SegmentInfo element, containing the meta&#45;data for a segment." alt="" coords="1333,267,1472,295"/><area shape="rect" id="node4" href="classtide_1_1_element.html" title="The Element interface, a basic interface to an element object." alt="" coords="197,281,307,309"/><area shape="rect" id="node16" href="classtide_1_1_primitive_element.html" title="tide::PrimitiveElement\&lt; std::string \&gt;" alt="" coords="580,198,841,226"/><area shape="rect" id="node23" href="classtide_1_1_primitive_element.html" title="tide::PrimitiveElement\&lt; double \&gt;" alt="" coords="592,263,829,291"/><area shape="rect" id="node30" href="classtide_1_1_primitive_element.html" title="tide::PrimitiveElement\&lt; uint64_t \&gt;" alt="" coords="588,314,833,342"/><area shape="rect" id="node37" href="classtide_1_1_primitive_element.html" title="tide::PrimitiveElement\&lt; std::vector\&lt; char \&gt; \&gt;" alt="" coords="549,455,872,483"/><area shape="rect" id="node44" href="classtide_1_1_primitive_element.html" title="tide::PrimitiveElement\&lt; int64_t \&gt;" alt="" coords="592,365,829,393"/><area shape="rect" id="node9" href="classboost_1_1equality__comparable.html" title="boost::equality_comparable\&lt; SeekHead \&gt;" alt="" coords="923,5,1221,33"/><area shape="rect" id="node14" href="classtide_1_1_string_element.html" title="String primitive element." alt="" coords="999,209,1145,237"/><area shape="rect" id="node19" href="classboost_1_1equality__comparable.html" title="boost::equality_comparable\&lt; PrimitiveElement\&lt; std::string \&gt; \&gt;" alt="" coords="33,165,471,193"/><area shape="rect" id="node21" href="classtide_1_1_float_element.html" title="Float primitive element." alt="" coords="1001,263,1143,291"/><area shape="rect" id="node26" href="classboost_1_1equality__comparable.html" title="boost::equality_comparable\&lt; PrimitiveElement\&lt; double \&gt; \&gt;" alt="" coords="44,230,460,258"/><area shape="rect" id="node28" href="classtide_1_1_u_int_element.html" title="Unsigned integer primitive element." alt="" coords="1004,314,1140,342"/><area shape="rect" id="node33" href="classboost_1_1equality__comparable.html" title="boost::equality_comparable\&lt; PrimitiveElement\&lt; uint64_t \&gt; \&gt;" alt="" coords="40,331,464,359"/><area shape="rect" id="node35" href="classtide_1_1_binary_element.html" title="Binary primitive element." alt="" coords="997,455,1147,483"/><area shape="rect" id="node40" href="classboost_1_1equality__comparable.html" title="boost::equality_comparable\&lt;PrimitiveElement\&lt;std::vector\&lt; char \&gt; \&gt; \&gt;" alt="" coords="7,465,497,493"/><area shape="rect" id="node42" href="classtide_1_1_date_element.html" title="Date primitive element." alt="" coords="1001,365,1143,393"/><area shape="rect" id="node47" href="classboost_1_1equality__comparable.html" title="boost::equality_comparable\&lt; PrimitiveElement\&lt; int64_t \&gt; \&gt;" alt="" coords="44,398,460,426"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classtide_1_1_segment-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#a955805c3e3d0c75f597ce90f60890415">Segment</a> (std::streamsize pad_size=4096)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new segment element.  <a href="#a955805c3e3d0c75f597ce90f60890415"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#a856840c6641ed2b447d8fb48e1fb139c">pad_size</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the padding size.  <a href="#a856840c6641ed2b447d8fb48e1fb139c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#a260e8ccb8153afeb9682a818e941347c">pad_size</a> (std::streamsize pad_size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the padding size.  <a href="#a260e8ccb8153afeb9682a818e941347c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#abd031dd2200d90804e973b823fb1f0d2">size</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the total size of the element.  <a href="#abd031dd2200d90804e973b823fb1f0d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#a69b42768bed4ead30196b59a5e2c7778">finalise</a> (std::iostream &amp;stream)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalise writing of the segment.  <a href="#a69b42768bed4ead30196b59a5e2c7778"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#a2246f54fe2cbfc06522733952f4c0d48">to_segment_offset</a> (std::streamsize stream_offset)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate an offset within the segment.  <a href="#a2246f54fe2cbfc06522733952f4c0d48"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#a581e101b1278c9c3fe5fe359616b29d3">to_stream_offset</a> (std::streamsize seg_offset)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the offset in a stream of a position in the segment.  <a href="#a581e101b1278c9c3fe5fe359616b29d3"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtide_1_1_seek_head.html">SeekHead</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#af83935348df2f270a1b97d3379992f8f">index</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The segment index.  <a href="#af83935348df2f270a1b97d3379992f8f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtide_1_1_segment_info.html">SegmentInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#a502ba2e12e8c5c2e045b146074806775">info</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The segment information.  <a href="#a502ba2e12e8c5c2e045b146074806775"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#af631e107314ab22d5df77c7e99f9731b">body_size</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the size of the body of this element.  <a href="#af631e107314ab22d5df77c7e99f9731b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#a8fb639741c7ccd4fa9147241bf708f8a">write_size</a> (std::ostream &amp;output)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classtide_1_1_element.html" title="The Element interface, a basic interface to an element object.">Element</a> size writing.  <a href="#a8fb639741c7ccd4fa9147241bf708f8a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#a5460341a58da66ac462d459588e192fe">write_body</a> (std::ostream &amp;output)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classtide_1_1_element.html" title="The Element interface, a basic interface to an element object.">Element</a> body writing.  <a href="#a5460341a58da66ac462d459588e192fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#a12792f92d03e87c7265ebea6968040e3">read_body</a> (std::istream &amp;input, std::streamsize size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classtide_1_1_element.html" title="The Element interface, a basic interface to an element object.">Element</a> body loading.  <a href="#a12792f92d03e87c7265ebea6968040e3"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#a1cd43127d51308de2453270e074b61b1">pad_size_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of the padding to place at the start of the file.  <a href="#a1cd43127d51308de2453270e074b61b1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::streamsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#a09c0c05f1b422932b1089d8cd221a5c4">size_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of the segment, as read from the file.  <a href="#a09c0c05f1b422932b1089d8cd221a5c4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtide_1_1_segment.html#a1e4a8547140663da467245d1300dda3d">writing_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">If the segment is currently being written.  <a href="#a1e4a8547140663da467245d1300dda3d"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classtide_1_1_segment.html" title="The Segment element.">Segment</a> element. </p>
<p>A segment makes up the body of a <a class="el" href="classtide_1_1_tide.html" title="The Tide interface, the interface provided by all Tide objects.">Tide</a> document. It is the only top-level element, excluding the EBMLHeader. All other <a class="el" href="classtide_1_1_tide.html" title="The Tide interface, the interface provided by all Tide objects.">Tide</a> elements are contained within it. Usually, a <a class="el" href="classtide_1_1_tide.html" title="The Tide interface, the interface provided by all Tide objects.">Tide</a> document contains a single segment.</p>
<p>The segment contains all the document's blocks (stored in clusters), and all relevant meta-data, such as document information, tags, attachments and cue points.</p>
<p>Because the body of a segment contains data that arrives at differing times, segments cannot be written in a single operation. Instead, a segment is opened for writing by calling <a class="el" href="classtide_1_1_element.html#af3fa670bba649aa6d844ab29342fb23d" title="Element writing.">write()</a>, which provides it with its target output byte stream. This prepares the byte stream for the segment to be written. Once writing is complete, the segment is finalised by calling <a class="el" href="classtide_1_1_segment.html#a69b42768bed4ead30196b59a5e2c7778" title="Finalise writing of the segment.">finalise()</a>. Finalising a segment completes it, writing such things as the segment's final size into the output stream.</p>
<p>Likewise, segments are not read in a single operation. Trying to do so for any reasonably-sized file would require a significant quantity of memory and be inefficient. Instead, the segment is opened for reading by calling the <a class="el" href="classtide_1_1_element.html#ad93208d53ae6c0567106c62cba71d842" title="Element reading.">read()</a> method, which prepares the segment for reading by the meta-seek element (if present) and filling in the index table. The child elements are then read directly from the file as needed. The segment does not need to be closed once reading is complete. </p>

<p>Definition at line <a class="el" href="segment_8h_source.html#l00068">68</a> of file <a class="el" href="segment_8h_source.html">segment.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a955805c3e3d0c75f597ce90f60890415"></a><!-- doxytag: member="tide::Segment::Segment" ref="a955805c3e3d0c75f597ce90f60890415" args="(std::streamsize pad_size=4096)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tide::Segment::Segment </td>
          <td>(</td>
          <td class="paramtype">std::streamsize&#160;</td>
          <td class="paramname"><em>pad_size</em> = <code>4096</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new segment element. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pad_size</td><td>The size of the padding to place at the start of the segment when opening it for writing. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af631e107314ab22d5df77c7e99f9731b"></a><!-- doxytag: member="tide::Segment::body_size" ref="af631e107314ab22d5df77c7e99f9731b" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize tide::Segment::body_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the size of the body of this element. </p>
<p>This function will not return the actual size of the segment until either the segment is read from a <a class="el" href="classtide_1_1_tide.html" title="The Tide interface, the interface provided by all Tide objects.">Tide</a> document or it is finalised in a <a class="el" href="classtide_1_1_tide.html" title="The Tide interface, the interface provided by all Tide objects.">Tide</a> document. </p>

<p>Implements <a class="el" href="classtide_1_1_element.html#afa34637edb097a0c084e3c8f0c51a84b">tide::Element</a>.</p>

<p>Definition at line <a class="el" href="segment_8h_source.html#l00164">164</a> of file <a class="el" href="segment_8h_source.html">segment.h</a>.</p>

</div>
</div>
<a class="anchor" id="a69b42768bed4ead30196b59a5e2c7778"></a><!-- doxytag: member="tide::Segment::finalise" ref="a69b42768bed4ead30196b59a5e2c7778" args="(std::iostream &amp;stream)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize tide::Segment::finalise </td>
          <td>(</td>
          <td class="paramtype">std::iostream &amp;&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finalise writing of the segment. </p>
<p>Calculates the total size of the segment and writes it into the segment header, followed by writing in the <a class="el" href="classtide_1_1_seek_head.html" title="The SeekHead element, used as an index for a Tide file.">SeekHead</a> element as the first child of the <a class="el" href="classtide_1_1_segment.html" title="The Segment element.">Segment</a>, thus finalising the segment.</p>
<p>The write pointer in stream must be positioned at the first byte after the last byte of the segment before this method is called.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stream</td><td>The byte stream to write the segment to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The final size, in bytes, of the segment (including the element header). </dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="structtide_1_1_not_writing.html" title="A segment or cluster was finalised before being started.">NotWriting</a></td><td>if the segment has not yet been opened for writing by calling <a class="el" href="classtide_1_1_element.html#af3fa670bba649aa6d844ab29342fb23d" title="Element writing.">write()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a856840c6641ed2b447d8fb48e1fb139c"></a><!-- doxytag: member="tide::Segment::pad_size" ref="a856840c6641ed2b447d8fb48e1fb139c" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize tide::Segment::pad_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the padding size. </p>
<p>When the segment is opened for writing, it places a certain quantity of padding at the start of the segment using a Void element. This padding is over-written during finalisation with the <a class="el" href="classtide_1_1_seek_head.html" title="The SeekHead element, used as an index for a Tide file.">SeekHead</a> and <a class="el" href="classtide_1_1_segment_info.html" title="The SegmentInfo element, containing the meta-data for a segment.">SegmentInfo</a> elements. The length of the padding is controlled by this property. Setting it to a value that is too small for one or both of the <a class="el" href="classtide_1_1_seek_head.html" title="The SeekHead element, used as an index for a Tide file.">SeekHead</a> and <a class="el" href="classtide_1_1_segment_info.html" title="The SegmentInfo element, containing the meta-data for a segment.">SegmentInfo</a> elements will result in those that don't fit being written at the end of the segment. In the case of the <a class="el" href="classtide_1_1_seek_head.html" title="The SeekHead element, used as an index for a Tide file.">SeekHead</a>, this can significantly degrade start-up performance when reading the segment. </p>

<p>Definition at line <a class="el" href="segment_8h_source.html#l00091">91</a> of file <a class="el" href="segment_8h_source.html">segment.h</a>.</p>

</div>
</div>
<a class="anchor" id="a260e8ccb8153afeb9682a818e941347c"></a><!-- doxytag: member="tide::Segment::pad_size" ref="a260e8ccb8153afeb9682a818e941347c" args="(std::streamsize pad_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tide::Segment::pad_size </td>
          <td>(</td>
          <td class="paramtype">std::streamsize&#160;</td>
          <td class="paramname"><em>pad_size</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the padding size. </p>

<p>Definition at line <a class="el" href="segment_8h_source.html#l00093">93</a> of file <a class="el" href="segment_8h_source.html">segment.h</a>.</p>

</div>
</div>
<a class="anchor" id="a12792f92d03e87c7265ebea6968040e3"></a><!-- doxytag: member="tide::Segment::read_body" ref="a12792f92d03e87c7265ebea6968040e3" args="(std::istream &amp;input, std::streamsize size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize tide::Segment::read_body </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::streamsize&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classtide_1_1_element.html" title="The Element interface, a basic interface to an element object.">Element</a> body loading. </p>
<p>This function does not actually read the body of the segment. Instead, it reads some of the level 1 elements and validates that the segment is usable:</p>
<ul>
<li>Reads the meta-seek element (if present), filling in the segment's index.</li>
<li>Reads the <a class="el" href="classtide_1_1_segment_info.html" title="The SegmentInfo element, containing the meta-data for a segment.">SegmentInfo</a> element. If not present, raises an error.</li>
<li>Checks for the existence of the <a class="el" href="classtide_1_1_tracks.html" title="The Tracks element, listing all tracks in the segment.">Tracks</a> element. Raises an error if not present. Checks for the existence of at least one <a class="el" href="classtide_1_1_cluster.html" title="The base Cluster, defining the common interface for Cluster element implementations.">Cluster</a> element. Raises an error if not present.</li>
</ul>
<p>When this function returns, the stream's read pointer will be placed at the end of the SegmentInformation element, unless the <a class="el" href="classtide_1_1_seek_head.html" title="The SeekHead element, used as an index for a Tide file.">SeekHead</a> element occurs after it, in which case it will be placed at the end of the <a class="el" href="classtide_1_1_seek_head.html" title="The SeekHead element, used as an index for a Tide file.">SeekHead</a> element.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of bytes read from the stream, excluding bytes read during element presence checks. In other words, this is the number of bytes into the segment that the read pointer has moved. </dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="structtide_1_1_multiple_seek_heads.html" title="A segment was found with multiple meta-seeks.">MultipleSeekHeads</a></td><td>if the segment has more than one index. </td></tr>
    <tr><td class="paramname"><a class="el" href="structtide_1_1_no_segment_info.html" title="A segment was found without a segment info element.">NoSegmentInfo</a></td><td>if the <a class="el" href="classtide_1_1_segment_info.html" title="The SegmentInfo element, containing the meta-data for a segment.">SegmentInfo</a> element is not found. </td></tr>
    <tr><td class="paramname"><a class="el" href="structtide_1_1_no_tracks.html" title="A segment was found without a tracks information element.">NoTracks</a></td><td>if the <a class="el" href="classtide_1_1_tracks.html" title="The Tracks element, listing all tracks in the segment.">Tracks</a> element is not found. </td></tr>
    <tr><td class="paramname"><a class="el" href="structtide_1_1_no_clusters.html" title="A segment was found without at least one cluster.">NoClusters</a></td><td>if at least one <a class="el" href="classtide_1_1_cluster.html" title="The base Cluster, defining the common interface for Cluster element implementations.">Cluster</a> element is not found. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classtide_1_1_element.html#a1880e36bed980635cdee8ad99045e385">tide::Element</a>.</p>

</div>
</div>
<a class="anchor" id="abd031dd2200d90804e973b823fb1f0d2"></a><!-- doxytag: member="tide::Segment::size" ref="abd031dd2200d90804e973b823fb1f0d2" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize tide::Segment::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the total size of the element. </p>

<p>Reimplemented from <a class="el" href="classtide_1_1_element.html#a40be2f4bbdc5aee9c5184e181343383d">tide::Element</a>.</p>

</div>
</div>
<a class="anchor" id="a2246f54fe2cbfc06522733952f4c0d48"></a><!-- doxytag: member="tide::Segment::to_segment_offset" ref="a2246f54fe2cbfc06522733952f4c0d48" args="(std::streamsize stream_offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize tide::Segment::to_segment_offset </td>
          <td>(</td>
          <td class="paramtype">std::streamsize&#160;</td>
          <td class="paramname"><em>stream_offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate an offset within the segment. </p>
<p>This function turns an offset in the output stream into an offset in this segment, which is necessary for the index. </p>

</div>
</div>
<a class="anchor" id="a581e101b1278c9c3fe5fe359616b29d3"></a><!-- doxytag: member="tide::Segment::to_stream_offset" ref="a581e101b1278c9c3fe5fe359616b29d3" args="(std::streamsize seg_offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize tide::Segment::to_stream_offset </td>
          <td>(</td>
          <td class="paramtype">std::streamsize&#160;</td>
          <td class="paramname"><em>seg_offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate the offset in a stream of a position in the segment. </p>
<p>This function turns an offset within the segment into an absolute position in a byte stream. </p>

</div>
</div>
<a class="anchor" id="a5460341a58da66ac462d459588e192fe"></a><!-- doxytag: member="tide::Segment::write_body" ref="a5460341a58da66ac462d459588e192fe" args="(std::ostream &amp;output)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize tide::Segment::write_body </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>output</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classtide_1_1_element.html" title="The Element interface, a basic interface to an element object.">Element</a> body writing. </p>
<p>This function, which opens up a segment for writing, does not actually write any final content. Instead, it preserves a chunk of space at the beginning of the file using a Void element for the <a class="el" href="classtide_1_1_seek_head.html" title="The SeekHead element, used as an index for a Tide file.">SeekHead</a> and <a class="el" href="classtide_1_1_segment_info.html" title="The SegmentInfo element, containing the meta-data for a segment.">SegmentInfo</a> elements to be written into by <a class="el" href="classtide_1_1_segment.html#a69b42768bed4ead30196b59a5e2c7778" title="Finalise writing of the segment.">finalise()</a>.</p>
<p>The size of space reserved is controlled by <a class="el" href="classtide_1_1_segment.html#a856840c6641ed2b447d8fb48e1fb139c" title="Get the padding size.">pad_size()</a>. </p>

<p>Implements <a class="el" href="classtide_1_1_element.html#ad6040279595409e4577c62f77cb2c5db">tide::Element</a>.</p>

</div>
</div>
<a class="anchor" id="a8fb639741c7ccd4fa9147241bf708f8a"></a><!-- doxytag: member="tide::Segment::write_size" ref="a8fb639741c7ccd4fa9147241bf708f8a" args="(std::ostream &amp;output)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize tide::Segment::write_size </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>output</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classtide_1_1_element.html" title="The Element interface, a basic interface to an element object.">Element</a> size writing. </p>

<p>Reimplemented from <a class="el" href="classtide_1_1_element.html#af07b078687d6603b67d48dcadcba5c74">tide::Element</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="af83935348df2f270a1b97d3379992f8f"></a><!-- doxytag: member="tide::Segment::index" ref="af83935348df2f270a1b97d3379992f8f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtide_1_1_seek_head.html">SeekHead</a> <a class="el" href="classtide_1_1_segment.html#af83935348df2f270a1b97d3379992f8f">tide::Segment::index</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The segment index. </p>
<p>All known level 1 elements are included in this index. It is a mapping from element ID (the key) to position, in bytes, in the segment (the value). The first level 1 element has a position of 0. An ID may occur multiple times.</p>
<p>There may be additional level 1 elements that are not mentioned in this index. Typically, all but the first cluster are not found in the index. </p>

<p>Definition at line <a class="el" href="segment_8h_source.html#l00126">126</a> of file <a class="el" href="segment_8h_source.html">segment.h</a>.</p>

</div>
</div>
<a class="anchor" id="a502ba2e12e8c5c2e045b146074806775"></a><!-- doxytag: member="tide::Segment::info" ref="a502ba2e12e8c5c2e045b146074806775" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtide_1_1_segment_info.html">SegmentInfo</a> <a class="el" href="classtide_1_1_segment.html#a502ba2e12e8c5c2e045b146074806775">tide::Segment::info</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The segment information. </p>
<p>This property stores all the segment's meta-data, such as the origin timecode of the segment and its timecode scale. </p>

<p>Definition at line <a class="el" href="segment_8h_source.html#l00133">133</a> of file <a class="el" href="segment_8h_source.html">segment.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1cd43127d51308de2453270e074b61b1"></a><!-- doxytag: member="tide::Segment::pad_size_" ref="a1cd43127d51308de2453270e074b61b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize <a class="el" href="classtide_1_1_segment.html#a1cd43127d51308de2453270e074b61b1">tide::Segment::pad_size_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The size of the padding to place at the start of the file. </p>

<p>Definition at line <a class="el" href="segment_8h_source.html#l00152">152</a> of file <a class="el" href="segment_8h_source.html">segment.h</a>.</p>

</div>
</div>
<a class="anchor" id="a09c0c05f1b422932b1089d8cd221a5c4"></a><!-- doxytag: member="tide::Segment::size_" ref="a09c0c05f1b422932b1089d8cd221a5c4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::streamsize <a class="el" href="classtide_1_1_segment.html#a09c0c05f1b422932b1089d8cd221a5c4">tide::Segment::size_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The size of the segment, as read from the file. </p>

<p>Definition at line <a class="el" href="segment_8h_source.html#l00154">154</a> of file <a class="el" href="segment_8h_source.html">segment.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1e4a8547140663da467245d1300dda3d"></a><!-- doxytag: member="tide::Segment::writing_" ref="a1e4a8547140663da467245d1300dda3d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classtide_1_1_segment.html#a1e4a8547140663da467245d1300dda3d">tide::Segment::writing_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If the segment is currently being written. </p>

<p>Definition at line <a class="el" href="segment_8h_source.html#l00156">156</a> of file <a class="el" href="segment_8h_source.html">segment.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/geoff/research/src/tide/include/tide/<a class="el" href="segment_8h_source.html">segment.h</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Fri Dec 9 2011 08:19:10 for Tide by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
